# План разработки - Школьная книга жалоб и предложений

1.  [x] **Настройка структуры проекта:** Создание базовой структуры каталогов Next.js с необходимыми папками и конфигурационными файлами (tsconfig.json, tailwind.config.ts и т.д.).
2.  [x] **Установка зависимостей:** Установка основных зависимостей (Next.js, React, TypeScript) и UI-библиотек (Tailwind CSS, shadcn/ui, Firebase).
3.  [x] **Инициализация Firebase:** Настройка конфигурации Firebase (с использованием переменных окружения) и инициализация приложения Firebase. Настройка Firebase Authentication, Firestore и Storage.
4.  [x] **Базовый макет и стили:** Реализация корневого макета (`src/app/layout.tsx`) и глобальных стилей (`src/styles/globals.css`) с использованием Tailwind.
5.  [x] **Аутентификация:**
    *   [x] Реализация страницы/компонента регистрации.
    *   [x] Реализация страницы/компонента входа.
    *   [x] Реализация функционала восстановления пароля.
    *   [x] Настройка подтверждения email.
    *   [x] Интеграция Firebase Authentication.
6.  [x] **Основная логика жалоб/предложений (Firestore):**
    *   [x] Определение моделей данных (типы TypeScript) для пользователей и жалоб/предложений.
    *   [x] Реализация правил безопасности Firestore.
    *   [x] Создание функций/хуков для создания, чтения, обновления жалоб (CRUD).
7.  [x] **Роли пользователей и права доступа:**
    *   [x] Реализация логики назначения первого пользователя администратором (через ручное изменение).
    *   [x] Реализация выбора роли при регистрации для последующих пользователей.
    *   [x] Реализация контроля доступа на основе ролей (через AuthContext и проверки в компонентах).
8.  [x] **Форма подачи жалобы/предложения:** Создание UI и логики для подачи новых жалоб/предложений, включая загрузку файлов в Firebase Storage (лимит 5 МБ, типы: jpg, png, pdf, docx - как базовый вариант).
9.  [x] **Список жалоб и детальный просмотр:**
    *   [x] Реализация UI для отображения списков жалоб (с фильтрацией по роли пользователя).
    *   [x] Реализация UI для просмотра деталей конкретной жалобы.
10. [~] **Обработка жалоб (Администратор/Учитель):**
    *   [x] Реализация UI для просмотра назначенных/всех жалоб (панели админа/учителя).
    *   [ ] Реализация функционала изменения статуса, назначения ответственных (только Администратор), добавления ответов (на странице деталей).
    *   [ ] Реализация базового изменения статуса "Требует уточнения".
11. [x] **Управление пользователями (Администратор):** Реализация UI для просмотра, управления ролями и блокировки/разблокировки пользователей.
12. [ ] **Email-уведомления:** Интеграция Firebase Cloud Functions для отправки email-уведомлений о различных событиях.
13. [ ] **Доработка и тестирование:** Улучшение UI/UX, добавление тестов, оптимизация производительности.
