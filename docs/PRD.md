# Техническое Задание (ТЗ) - Школьная книга жалоб и предложений (school-complaints)

**Версия:** 1.1
**Дата:** 16.04.2025

## 1. Введение

*   **1.1. Название проекта:** Школьная книга жалоб и предложений (далее - Система).
*   **1.2. Цель проекта:**
    *   Создание централизованной онлайн-платформы для подачи, отслеживания и обработки жалоб и предложений от участников образовательного процесса (учеников, родителей, учителей).
    *   Повышение прозрачности процесса рассмотрения обращений.
    *   Улучшение качества работы школы и оперативности реагирования на проблемы и инициативы путем анализа обратной связи.
    *   Обеспечение структурированного взаимодействия между пользователями и администрацией/учителями по вопросам жалоб и предложений.

## 2. Пользователи и Роли

*   **2.1. Роли:** Ученик, Родитель, Учитель, Администрация.
*   **2.2. Назначение ролей:**
    *   Первый зарегистрировавшийся пользователь автоматически получает роль **Администрация**.
    *   Последующие пользователи при регистрации выбирают роль: **Ученик**, **Родитель** или **Учитель**.
*   **2.3. Права доступа:**
    *   **Ученик/Родитель:** Регистрация, аутентификация, подача жалоб/предложений, просмотр статуса/ответов на *свои* обращения, получение email-уведомлений.
    *   **Учитель:** Все права Ученика/Родителя (но подает только *предложения*), просмотр *назначенных* ему обращений, формирование ответов на *назначенные* обращения, получение email-уведомлений (включая о назначении ответственным).
    *   **Администрация:** Все права Учителя, просмотр *всех* обращений, назначение ответственных, изменение статусов, формирование ответов, управление пользователями, получение email-уведомлений (включая о новых обращениях).

## 3. Функциональные требования

*   **3.1. Регистрация и Аутентификация:**
    *   Форма регистрации (Email, Пароль, Подтверждение пароля, Выбор роли [Ученик/Родитель/Учитель] - кроме первого пользователя).
    *   Подтверждение email по ссылке.
    *   Форма входа (Email, Пароль).
    *   Восстановление пароля.
    *   Использование Firebase Authentication.
*   **3.2. Личный кабинет пользователя (Ученик, Родитель, Учитель):**
    *   Список своих обращений (статус, тема).
    *   Просмотр деталей своего обращения (текст, категория, дата, файлы, статус, история статусов, ответ).
    *   Форма подачи нового обращения.
*   **3.3. Подача жалобы/предложения:**
    *   Форма (Тема [обязательно], Текст [обязательно], Категория [выбор: "Жалоба"/"Предложение", обязательно], Прикрепление файлов [опционально, указать лимиты]).
    *   Анонимность не предусмотрена.
*   **3.4. Просмотр и отслеживание обращений:**
    *   Пользователи видят только свои обращения.
    *   Администрация видит все.
    *   Учителя видят свои предложения и назначенные им обращения.
    *   Фильтрация/сортировка списка обращений.
*   **3.5. Обработка обращений (Администрация/Учителя):**
    *   Интерфейс просмотра деталей обращения.
    *   Изменение статуса (согласно списку статусов).
    *   Назначение ответственного (только Администрация).
    *   Формирование ответа (сохраняется в системе, отправляется на email).
    *   **Механизм "Требует уточнения":** При переводе обращения в статус "Требует уточнения", ответственному сотруднику предоставляется возможность ввести уточняющие вопросы, которые отправляются заявителю по email. Ответ заявителя (возможно, через email или специальную форму) должен быть привязан к обращению. *(Детали реализации ответа на уточнение требуют проработки)*.
*   **3.6. Уведомления (Email):**
    *   **Пользователю:** Регистрация (с подтверждением), подача обращения, смена статуса, получение ответа, запрос на уточнение.
    *   **Администрации:** Новое обращение.
    *   **Учителю:** Назначение ответственным.
*   **3.7. Категории обращений:**
    *   При подаче обращения пользователь может выбрать одну из предустановленных категорий (поле не обязательное, но рекомендуемое).
    *   **Предлагаемый список категорий:**
        *   Учебный процесс (качество уроков, расписание, ДЗ)
        *   Инфраструктура (классы, оборудование, столовая, туалеты)
        *   Безопасность (охрана, поведение, буллинг)
        *   Внеклассная деятельность (кружки, мероприятия)
        *   Взаимодействие (с учителями/администрацией/учениками)
        *   Предложения по улучшению
        *   Другое
    *   Администрация должна иметь возможность управлять списком категорий (добавлять/редактировать/удалять).
*   **3.8. Управление пользователями (для Администрации):**
    *   Интерфейс для просмотра списка всех зарегистрированных пользователей.
    *   Возможность просмотра информации о пользователе (роль, email, статус подтверждения email).
    *   Возможность изменения роли пользователя.
    *   Возможность блокировки/разблокировки пользователя.
*   **3.9. Архивация:**
    *   Механизм архивации обращений на данном этапе **не реализуется** (отложен).

## 4. Нефункциональные требования

*   **4.1. Технологический стек:**
    *   **Фронтенд:** Next.js (TSX).
    *   **Стилизация:** Tailwind CSS.
    *   **UI Компоненты:** shadcn/ui.
    *   **Бэкенд и Аутентификация:** Firebase (Cloud Functions, Firebase Authentication).
    *   **База данных:** Управляемый сервис PostgreSQL, предоставляемый Firebase.
    *   **Хостинг:** Vercel.
*   **4.2. Безопасность:** Стандартные меры (защита от веб-уязвимостей, разграничение доступа, безопасное хранение данных).
*   **4.3. Производительность:** Приемлемое время отклика.
*   **4.4. UI/UX:** Интуитивно понятный, адаптивный дизайн.

## 5. Статусы обращений

1.  **Новая**
2.  **Назначена ответственному**
3.  **В работе**
4.  **Требует уточнения** (Инициирует отправку email с вопросами заявителю)
5.  **Отвечено**
6.  **Отклонено** (С возможностью указания причины)

---
